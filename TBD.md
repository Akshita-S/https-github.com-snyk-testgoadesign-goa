Notes of things I know still have to be done. Lots more I don't know about.

- Generalize middleware
- Move mux out of service
- Generalize errors
